<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç–∞–∫—Ç–∏ | –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫—ñ –ó–∞–ø–∏—Ç–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" href="/static/favicon.ico?v=1">
    <style>
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 10000;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .toast {
                bottom: 20px;
                right: 20px;
                left: 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="/" class="logo">
                <img src="/static/logo-shield.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-icon">
                –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π <span>–ó–∞–ø–∏—Ç</span>
            </a>
            <ul class="nav-links">
                <li><a href="/">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                <li><a href="/form">–ü–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Ç</a></li>
                <li><a href="/contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
            </ul>
            <button class="burger-menu" aria-label="–ú–µ–Ω—é">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="menu-overlay"></div>

    <div class="contact-page">
        <div class="contact-content">
            <div class="contact-info">
                <h2>–ó–≤'—è–∂—ñ—Ç—å—Å—è –ó –ù–∞–º–∏</h2>
                <p style="color: var(--gray); font-size: 1.2rem; margin-bottom: 3rem;">–ú–∏ –≥–æ—Ç–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç–∏ –Ω–∞ –≤—Å—ñ –≤–∞—à—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –Ω–∞–¥–∞—Ç–∏ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω—É —é—Ä–∏–¥–∏—á–Ω—É –¥–æ–ø–æ–º–æ–≥—É</p>

                <div class="contact-item">
                    <h3>üìç –ê–¥—Ä–µ—Å–∞</h3>
                    <p>65016, –º. –û–¥–µ—Å–∞, –≤—É–ª. –ë–∞—à—Ç–∞–Ω–Ω–∞, 2</p>
                </div>

                <div class="contact-item">
                    <h3>üìû –¢–µ–ª–µ—Ñ–æ–Ω</h3>
                    <p>+380 (97) 224-67-54</p>
                </div>

                <div class="contact-item">
                    <h3>‚úâÔ∏è Email</h3>
                    <p>m.rudyk.advokat@gmail.com</p>
                </div>

                <div class="contact-item">
                    <h3>üïó –ì–æ–¥–∏–Ω–∏ —Ä–æ–±–æ—Ç–∏</h3>
                    <p>–ü–æ–Ω–µ–¥—ñ–ª–æ–∫ - –ü'—è—Ç–Ω–∏—Ü—è: 9:00 - 18:00<br>–°—É–±–æ—Ç–∞: 10:00 - 15:00<br>–ù–µ–¥—ñ–ª—è: –í–∏—Ö—ñ–¥–Ω–∏–π</p>
                </div>
            </div>

            <div class="contact-form-wrapper" id="contact-form">
                <h3 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 2rem; color: var(--navy);">–ù–∞–ø–∏—à—ñ—Ç—å –Ω–∞–º</h3>
                <form id="contactForm" action="/contact/submit" method="post">
                    <div class="form-group">
                        <label>–í–∞—à–µ —ñ–º'—è</label>
                        <input type="text" name="name" id="name" placeholder="–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ">
                    </div>
                    <div class="form-group">
                        <label>Email (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label>
                        <input type="email" name="email" id="email" placeholder="ivan@example.com">
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input
                            type="tel"
                            name="phone"
                            id="phone"
                            placeholder="+38 (___) ___-__-__"
                            maxlength="19"
                        >
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)</label>
                        <textarea name="message" placeholder="–û–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è..."></textarea>
                    </div>
                    <button type="submit" class="submit-button">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</button>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">–ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π<span>–ó–∞–ø–∏—Ç</span></div>
            <p style="margin: 1rem 0;">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —é—Ä–∏–¥–∏—á–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –æ–Ω–ª–∞–π–Ω</p>
            <div class="footer-text">
                <p>¬© 2026 –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π–ó–∞–ø–∏—Ç. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
                <p style="margin-top: 0.5rem;">
                    –º. –û–¥–µ—Å–∞ |
                    <a href="tel:+380972246754" style="color: inherit; text-decoration: none;">+380 (97) 224-67-54</a> |
                    <a href="mailto:m.rudyk.advokat@gmail.com" style="color: inherit; text-decoration: none;">m.rudyk.advokat@gmail.com</a> |
                    <a href="https://t.me/nasaraya13" target="_blank" style="color: inherit; text-decoration: none;">üì± Telegram</a>
                </p>
            </div>
        </div>
    </footer>

    <div id="toast" class="toast">
        <span class="toast-icon">‚úì</span>
        <span class="toast-message"></span>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    // Burger menu functionality
    const burgerMenu = document.querySelector('.burger-menu');
    const navLinks = document.querySelector('.nav-links');
    const menuOverlay = document.querySelector('.menu-overlay');
    const body = document.body;

    function toggleMenu() {
        burgerMenu.classList.toggle('active');
        navLinks.classList.toggle('active');
        menuOverlay.classList.toggle('active');
        body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
    }

    burgerMenu.addEventListener('click', toggleMenu);
    menuOverlay.addEventListener('click', toggleMenu);

    // Close menu when clicking on a link
    const navItems = navLinks.querySelectorAll('a');
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            if (navLinks.classList.contains('active')) {
                toggleMenu();
            }
        });
    });

    // Close menu on window resize
    window.addEventListener('resize', () => {
        if (window.innerWidth > 968 && navLinks.classList.contains('active')) {
            toggleMenu();
        }
    });

    // Contact form functionality
    const contactForm = document.getElementById('contactForm');
    const phoneInput = document.getElementById('phone');
    const PHONE_PREFIX = '+38 (';

    phoneInput.addEventListener('input', onPhoneInput);
    phoneInput.addEventListener('focus', onPhoneFocus);
    phoneInput.addEventListener('blur', onPhoneBlur);
    phoneInput.addEventListener('keydown', onPhoneKeydown);

    function showToast(message) {
        const toast = document.getElementById('toast');
        const toastMessage = toast.querySelector('.toast-message');

        toastMessage.textContent = message;
        toast.classList.add('show');

        setTimeout(() => {
            toast.classList.remove('show');
        }, 4000);
    }

    {% if success %}
    showToast("{{ success }}");
    contactForm.reset();
    {% endif %}

    const regexPatterns = {
        phone: /^\+380\d{9}$/,
        email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    };

    function onPhoneFocus(e) {
        if (!e.target.value) {
            e.target.value = PHONE_PREFIX;
            setCaret(e.target, PHONE_PREFIX.length);
        }
    }

    function onPhoneInput(e) {
    const input = e.target;

    let numbers = input.value.replace(/\D/g, '');

    if (!numbers.startsWith('38')) {
        numbers = '38';
    }

    numbers = numbers.substring(0, 12);

    let formatted = '+38 (';

    if (numbers.length > 2) {
        formatted += numbers.substring(2, 5);
    }
    if (numbers.length >= 5) {
        formatted += ') ' + numbers.substring(5, 8);
    }
    if (numbers.length >= 8) {
        formatted += '-' + numbers.substring(8, 10);
    }
    if (numbers.length >= 10) {
        formatted += '-' + numbers.substring(10, 12);
    }

    const oldLen = input.value.length;
    const newLen = formatted.length;
    const cursorPos = input.selectionStart;

    input.value = formatted;

    if (newLen < oldLen) {
        setCaret(input, cursorPos);
    } else {
        setCaret(input, formatted.length);
    }
}

    function onPhoneBlur(e) {
        if (e.target.value === PHONE_PREFIX) {
            e.target.value = '';
        }
    }

    function onPhoneKeydown(e) {
    const input = e.target;
    const cursorPos = input.selectionStart;
    const value = input.value;

    if (e.key === 'Backspace') {
        if (cursorPos <= PHONE_PREFIX.length) {
            e.preventDefault();
            return;
        }

        if (cursorPos > 0 && /[\s\-\)]/.test(value[cursorPos - 1])) {
            e.preventDefault();

            let newPos = cursorPos - 1;
            while (newPos > PHONE_PREFIX.length && !/\d/.test(value[newPos - 1])) {
                newPos--;
            }

            if (newPos > PHONE_PREFIX.length) {
                let numbers = value.replace(/\D/g, '');
                let digitIndex = 0;
                let targetDigitPos = 0;

                for (let i = 0; i < newPos; i++) {
                    if (/\d/.test(value[i])) {
                        digitIndex++;
                    }
                }

                numbers = numbers.slice(0, digitIndex - 1) + numbers.slice(digitIndex);

                if (!numbers.startsWith('38')) numbers = '38';
                numbers = numbers.substring(0, 12);

                let formatted = '+38 (';
                if (numbers.length > 2) formatted += numbers.substring(2, 5);
                if (numbers.length >= 5) formatted += ') ' + numbers.substring(5, 8);
                if (numbers.length >= 8) formatted += '-' + numbers.substring(8, 10);
                if (numbers.length >= 10) formatted += '-' + numbers.substring(10, 12);

                input.value = formatted;

                let newCursorPos = PHONE_PREFIX.length;
                let digitsCount = 0;
                for (let i = PHONE_PREFIX.length; i < formatted.length; i++) {
                    if (/\d/.test(formatted[i])) {
                        digitsCount++;
                        if (digitsCount === digitIndex - 1) {
                            newCursorPos = i + 1;
                            break;
                        }
                    }
                }
                if (digitsCount < digitIndex - 1) newCursorPos = formatted.length;

                setCaret(input, newCursorPos);
            }
        }
    } else if (e.key === 'Delete') {
        if (cursorPos < PHONE_PREFIX.length) {
            e.preventDefault();
            return;
        }

        if (cursorPos < value.length && /[\s\-\(\)]/.test(value[cursorPos])) {
            e.preventDefault();

            let newPos = cursorPos;
            while (newPos < value.length && !/\d/.test(value[newPos])) {
                newPos++;
            }

            if (newPos < value.length) {
                let numbers = value.replace(/\D/g, '');
                let digitIndex = 0;

                for (let i = 0; i < newPos; i++) {
                    if (/\d/.test(value[i])) {
                        digitIndex++;
                    }
                }

                numbers = numbers.slice(0, digitIndex) + numbers.slice(digitIndex + 1);

                if (!numbers.startsWith('38')) numbers = '38';
                numbers = numbers.substring(0, 12);

                let formatted = '+38 (';
                if (numbers.length > 2) formatted += numbers.substring(2, 5);
                if (numbers.length >= 5) formatted += ') ' + numbers.substring(5, 8);
                if (numbers.length >= 8) formatted += '-' + numbers.substring(8, 10);
                if (numbers.length >= 10) formatted += '-' + numbers.substring(10, 12);

                input.value = formatted;
                setCaret(input, cursorPos);
            }
        }
    }
}

    function setCaret(input, pos) {
        requestAnimationFrame(() => {
            input.setSelectionRange(pos, pos);
        });
    }

    function showError(input, message) {
        let errorEl = input.parentNode.querySelector('.error-message');
        if (!errorEl) {
            errorEl = document.createElement('div');
            errorEl.className = 'error-message';
            errorEl.style.color = '#ef4444';
            errorEl.style.fontSize = '0.9rem';
            input.parentNode.appendChild(errorEl);
        }
        errorEl.textContent = message;
        errorEl.classList.add('show');
        input.style.borderColor = '#ef4444';
    }

    function clearError(input) {
        const errorEl = input.parentNode.querySelector('.error-message');
        if (errorEl) {
            errorEl.classList.remove('show');
            errorEl.textContent = '';
        }
        input.style.borderColor = '';
    }

    function validateField(input) {
        clearError(input);
        const val = input.value.trim();
        let valid = true;

        if ((input.id === 'name' || input.id === 'phone') && !val) {
            showError(input, "–¶–µ –ø–æ–ª–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ");
            valid = false;
        } else if (val) {
            if (input.id === 'phone') {
                const —á–∏—Å—Ç–∏–π–¢–µ–ª–µ—Ñ–æ–Ω = '+' + val.replace(/\D/g, '');

                if (!regexPatterns.phone.test(—á–∏—Å—Ç–∏–π–¢–µ–ª–µ—Ñ–æ–Ω)) {
                    showError(input, "–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É");
                    valid = false;
                }
            }
            if (input.id === 'email' && !regexPatterns.email.test(val)) {
                showError(input, "–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É");
                valid = false;
            }
        }

        return valid;
    }

    contactForm.addEventListener('submit', (e) => {
        phoneInput.value = '+' + phoneInput.value.replace(/\D/g, '');
        const inputs = contactForm.querySelectorAll('input, textarea');
        let formValid = true;

        inputs.forEach(input => {
            if (!validateField(input)) formValid = false;
        });

        if (!formValid) e.preventDefault();
    });

    contactForm.querySelectorAll('input, textarea').forEach(input => {
        input.addEventListener('input', () => validateField(input));
    });

    // Scroll to form if hash is present
    if (window.location.hash === '#contact-form') {
        setTimeout(() => {
            const formElement = document.getElementById('contact-form');
            if (formElement) {
                formElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }, 100);
    }
});
</script>

</body>
</html>