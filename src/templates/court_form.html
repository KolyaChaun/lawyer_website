<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–∞—Ç–∏ –°—É–¥–æ–≤—É –ó–∞—è–≤—É | –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫—ñ –ó–∞–ø–∏—Ç–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" href="/static/favicon.ico?v=1">
    <style>
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
            padding: 0 20px;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--light-gray);
            z-index: 0;
        }

        .progress-line {
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: var(--gold);
            transition: width 0.3s ease;
            z-index: 1;
        }

        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-number {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: var(--white);
            border: 2px solid var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--gray);
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }

        .step-indicator.active .step-number {
            background: var(--gold);
            border-color: var(--gold);
            color: var(--navy);
        }

        .step-indicator.completed .step-number {
            background: var(--deep-blue);
            border-color: var(--deep-blue);
            color: var(--white);
        }

        .step-label {
            font-size: 0.85rem;
            color: var(--gray);
            text-align: center;
            max-width: 120px;
        }

        .step-indicator.active .step-label {
            color: var(--navy);
            font-weight: 600;
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--navy);
            margin-bottom: 2rem;
        }

        .radio-group {
            display: flex;
            gap: 2rem;
            margin-top: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .info-box {
            background: var(--cream);
            padding: 1.2rem;
            border-radius: 10px;
            border-left: 4px solid var(--gold);
            margin: 1.5rem 0;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .preview-section {
            background: var(--cream);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--gold);
        }

        .preview-section h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            color: var(--navy);
            margin-bottom: 1rem;
        }

        .preview-item {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .preview-item:last-child {
            border-bottom: none;
        }

        .preview-label {
            font-weight: 600;
            color: var(--gray);
        }

        .preview-value {
            color: var(--navy);
        }

        .text-editor {
            width: 100%;
            min-height: 300px;
            padding: 1rem;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-family: 'Manrope', sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            background: var(--cream);
            resize: vertical;
        }

        .text-editor:focus {
            outline: none;
            border-color: var(--gold);
            background: var(--white);
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
        }

        /* PDF Preview Styles */
        .pdf-preview-container {
            margin-top: 2rem;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .pdf-header {
            background: linear-gradient(135deg, var(--navy) 0%, var(--deep-blue) 100%);
            padding: 2rem;
            border-radius: 20px 20px 0 0;
            color: var(--white);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .pdf-header-left {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .pdf-icon {
            width: 50px;
            height: 50px;
            background: var(--gold);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--navy);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .pdf-title-section h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin: 0 0 0.3rem 0;
            color: var(--white);
        }

        .pdf-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .pdf-viewer-wrapper {
            background: #f5f5f5;
            border-radius: 0 0 20px 20px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .pdf-frame {
            width: 100%;
            height: 80vh;
            border: none;
            border-radius: 12px;
            background: var(--white);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .success-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            background: var(--white);
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--light-gray);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            color: var(--navy);
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Agreement Section Styles */
        .agreement-section {
            margin-top: 2rem;
            padding: 0 2rem;
        }

        .agreement-box {
            background: var(--cream);
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 4px solid var(--gold);
        }

        .agreement-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1.6;
        }

        .agreement-checkbox input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            margin-top: 2px;
            flex-shrink: 0;
        }

        .agreement-checkbox span {
            color: var(--navy);
        }

        .agreement-checkbox a {
            color: var(--gold);
            text-decoration: underline;
            font-weight: 600;
        }

        .agreement-checkbox a:hover {
            color: var(--deep-blue);
        }

        /* Disabled button state */
        .submit-button:disabled {
            cursor: not-allowed !important;
            pointer-events: auto !important;
            opacity: 0.6;
        }

        /* Agreement error state */
        .agreement-box.error {
            border-left-color: #ef4444;
            background: #fee;
            animation: shake 0.5s;
        }

        .agreement-checkbox.error {
            color: #ef4444;
        }

        .agreement-checkbox.error input[type="checkbox"] {
            border: 2px solid #ef4444;
            outline: 2px solid #ef4444;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            font-weight: 600;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .error-message.show {
            display: block;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        @media (max-width: 768px) {
            .progress-bar {
                flex-wrap: wrap;
                gap: 1rem;
            }
            .step-indicator {
                flex: 0 0 calc(20% - 1rem);
            }
            .step-label {
                font-size: 0.65rem;
            }
            .preview-item {
                grid-template-columns: 1fr;
                gap: 0.3rem;
            }
            .pdf-header {
                flex-direction: column;
                gap: 1.5rem;
                text-align: center;
                padding: 1.5rem;
            }
            .pdf-header-left {
                flex-direction: column;
                gap: 1rem;
            }
            .pdf-title-section h3 {
                font-size: 1.3rem;
            }
            .pdf-subtitle {
                font-size: 0.85rem;
            }
            .pdf-icon {
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }
            .pdf-viewer-wrapper {
                padding: 1rem;
                border-radius: 0 0 15px 15px;
            }
            .pdf-frame {
                height: 55vh;
                border-radius: 8px;
            }
        }

        @media (max-width: 640px) {
            .pdf-header {
                padding: 1.2rem;
                border-radius: 15px 15px 0 0;
            }
            .pdf-title-section h3 {
                font-size: 1.1rem;
            }
            .pdf-subtitle {
                font-size: 0.8rem;
            }
            .pdf-icon {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            .pdf-viewer-wrapper {
                padding: 0.8rem;
            }
            .pdf-frame {
                height: 50vh;
            }
            .success-badge {
                font-size: 0.85rem;
                padding: 0.4rem 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .pdf-header {
                padding: 1rem;
            }
            .pdf-title-section h3 {
                font-size: 1rem;
            }
            .pdf-subtitle {
                font-size: 0.75rem;
            }
            .pdf-icon {
                width: 36px;
                height: 36px;
                font-size: 1rem;
            }
            .pdf-viewer-wrapper {
                padding: 0.5rem;
            }
            .pdf-frame {
                height: 45vh;
                border-radius: 6px;
            }
        }

        @media (max-width: 375px) {
            .pdf-header {
                padding: 0.8rem;
            }
            .pdf-title-section h3 {
                font-size: 0.95rem;
            }
            .pdf-icon {
                width: 32px;
                height: 32px;
                font-size: 0.9rem;
            }
            .pdf-frame {
                height: 40vh;
            }
        }
    </style>
</head>
<body>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">–§–æ—Ä–º—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞</div>
            <div class="loading-subtext">–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ...</div>
        </div>
    </div>

    <nav>
        <div class="nav-container">
            <a href="/" class="logo">
                <img src="/static/logo-shield.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo-icon">
                –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π <span>–ó–∞–ø–∏—Ç</span>
            </a>
            <ul class="nav-links">
                <li><a href="/">–ì–æ–ª–æ–≤–Ω–∞</a></li>
                <li><a href="/form">–ü–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Ç</a></li>
                <li><a href="/contact">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li>
            </ul>
            <button class="burger-menu" aria-label="–ú–µ–Ω—é">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="menu-overlay"></div>

    <div class="form-page">
        <div class="progress-bar">
            <div class="progress-line" id="progressLine"></div>
            <div class="step-indicator active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">–û—Ä–≥–∞–Ω</div>
            </div>
            <div class="step-indicator" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">–ö–ª—ñ—î–Ω—Ç</div>
            </div>
            <div class="step-indicator" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É</div>
            </div>
            <div class="step-indicator" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞</div>
            </div>
            <div class="step-indicator" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">–î–æ–∫—É–º–µ–Ω—Ç</div>
            </div>
        </div>

        <div class="step-content active" data-step="1">
            <h2 class="step-title">–û—Ä–≥–∞–Ω –∞–±–æ —é—Ä–∏–¥–∏—á–Ω–∞ –æ—Å–æ–±–∞</h2>

            <div class="form-group">
                <label>–ù–∞–∑–≤–∞ –æ—Ä–≥–∞–Ω—É –∞–±–æ —é—Ä–∏–¥–∏—á–Ω–æ—ó –æ—Å–æ–±–∏ <span class="required">*</span></label>
                <input type="text" id="organizationName" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –î–µ—Ä–∂–∞–≤–Ω–∞ –ø–æ–¥–∞—Ç–∫–æ–≤–∞ —Å–ª—É–∂–±–∞" required>
            </div>

            <div class="form-group">
                <label>–ê–¥—Ä–µ—Å–∞ –æ—Ä–≥–∞–Ω—É –∞–±–æ —é—Ä–∏–¥–∏—á–Ω–æ—ó –æ—Å–æ–±–∏ <span class="required">*</span></label>
                <input type="text" id="organizationAddress" placeholder="–º. –ö–∏—ó–≤, –≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 1" required>
            </div>

            <div class="form-group">
                <label>–ö–æ–¥ –Ñ–î–†–ü–û–£ <span class="required">*</span></label>
                <input type="text" id="organizationEDRPOU" placeholder="12345678" required>
                <small style="color: var(--gray); font-size: 0.85rem;">8 —Ü–∏—Ñ—Ä</small>
            </div>

            <div class="form-group">
                <label>–¢–µ–ª–µ—Ñ–æ–Ω –∞–±–æ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞ –æ—Ä–≥–∞–Ω—É/—é—Ä–∏–¥–∏—á–Ω–æ—ó –æ—Å–æ–±–∏ <span class="required">*</span></label>
                <input type="text" id="organizationContact" placeholder="+380123456789 –∞–±–æ info@example.com" required>
            </div>

            <div class="info-box">
                * - –∑–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ
            </div>
        </div>

        <div class="step-content" data-step="2">
            <h2 class="step-title">–ö–ª—ñ—î–Ω—Ç</h2>

            <div class="form-group">
                <label>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä –æ–±–ª—ñ–∫–æ–≤–æ—ó –∫–∞—Ä—Ç–∫–∏ –ø–ª–∞—Ç–Ω–∏–∫–∞ –ø–æ–¥–∞—Ç–∫—ñ–≤ (—Ä–∞–Ω—ñ—à–µ –Ü–ü–ù)</label>
                <input type="text" id="taxNumber" placeholder="1234500671" required>
                <small style="color: var(--gray); font-size: 0.85rem;">–†–ù–û–ö–ü–ü –º–∞—î —Å–∫–ª–∞–¥–∞—Ç–∏—Å—è –∑ 10 —Ü–∏—Ñ—Ä (—Å–µ—Ä—ñ—è –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞ –∞–±–æ –Ω–æ–º–µ—Ä ID –∫–∞—Ä—Ç–∫–∏, —É —Ä–∞–∑—ñ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ)</small>
            </div>

            <div class="form-group">
                <label>–ü—Ä—ñ–∑–≤–∏—â–µ, —ñ–º'—è —Ç–∞ –ø–æ –±–∞—Ç—å–∫–æ–≤—ñ <span class="required">*</span></label>
                <input type="text" id="fullName" placeholder="–ö–æ–≤–∞–ª–µ–Ω–∫–æ –ú–∏–∫–æ–ª–∞ –ü–µ—Ç—Ä–æ–≤–∏—á" required>
            </div>

            <div class="form-group">
                <label>–ê–¥—Ä–µ—Å–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–Ω—è/–ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è/–º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è <span class="required">*</span></label>
                <input type="text" id="address" placeholder="–º. –ö–∏—ó–≤, –≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 10" required>
                <small style="color: var(--gray); font-size: 0.85rem;">–í–≤–µ–¥—ñ—Ç—å –æ–±–ª–∞—Å—Ç—å, —Ä–∞–π–æ–Ω, –º—ñ—Å—Ç–æ (—Å–µ–ª–æ, —Å–µ–ª–∏—â–µ), –≤—É–ª (–±—É–ª—å–≤. –ø—Ä–æ—Å–ø—Ç, —É–∑–≤—ñ–∑ —Ç–æ—â–æ), –±—É–¥, –∫–≤, –ø–æ—à—Ç–æ–≤–∏–π —ñ–Ω–¥–µ–∫—Å</small>
            </div>

            <div class="form-group">
                <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É <span class="required">*</span></label>
                <input type="tel" id="phone" placeholder="+380123456789" required>
                <small style="color: var(--gray); font-size: 0.85rem;">–ù–æ–º–µ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ +380XXXXXXXXX</small>
            </div>

            <div class="form-group">
                <label>–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞ <span class="required">*</span></label>
                <input type="email" id="email" placeholder="info@example.com" required>
                <small style="color: var(--gray); font-size: 0.85rem;">–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∞–¥—Ä–µ—Å–∞ –º–∞—î –±—É—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ info@example.com</small>
            </div>

            <div class="info-box">
                * - –∑–∞–ø–æ–≤–Ω–æ–≤—É–≤–∞—Ç–∏ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ
            </div>
        </div>

        <div class="step-content" data-step="3">
            <h2 class="step-title">–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É</h2>

            <div class="info-box">
                –§–∞–∫—Ç–∏—á–Ω—ñ –ø—ñ–¥—Å—Ç–∞–≤–∏ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –∑ –∞–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–º –∑–∞–ø–∏—Ç–æ–º
            </div>

            <div class="form-group">
                <label>–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É</label>
                <textarea class="text-editor" id="claimText" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –≤–∞—à–æ–≥–æ –∑–∞–ø–∏—Ç—É..."></textarea>
            </div>

            <div class="form-group">
                <label>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞/–∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —è–∫—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏</label>
                <textarea class="text-editor" id="documentsRequested" placeholder="–í–∫–∞–∂—ñ—Ç—å —è–∫—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é —Ç–∞/–∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏..."></textarea>
            </div>
        </div>

        <div class="step-content" data-step="4">
            <h2 class="step-title">–ü–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</h2>

            <div class="info-box">
                –î–∞–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ. –í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—É –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç.
            </div>

            <div class="preview-section">
                <h3>–û—Ä–≥–∞–Ω –∞–±–æ —é—Ä–∏–¥–∏—á–Ω–∞ –æ—Å–æ–±–∞</h3>
                <div class="preview-item">
                    <div class="preview-label">–ù–∞–∑–≤–∞:</div>
                    <div class="preview-value" id="preview-organizationName"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–ê–¥—Ä–µ—Å–∞:</div>
                    <div class="preview-value" id="preview-organizationAddress"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–ö–æ–¥ –Ñ–î–†–ü–û–£:</div>
                    <div class="preview-value" id="preview-organizationEDRPOU"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–ö–æ–Ω—Ç–∞–∫—Ç:</div>
                    <div class="preview-value" id="preview-organizationContact"></div>
                </div>
            </div>

            <div class="preview-section">
                <h3>–ö–ª—ñ—î–Ω—Ç</h3>
                <div class="preview-item">
                    <div class="preview-label">–¢–∏–ø –æ—Å–æ–±–∏:</div>
                    <div class="preview-value" id="preview-applicantType"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–Ü–ü–ù:</div>
                    <div class="preview-value" id="preview-taxNumber"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–ü–Ü–ë:</div>
                    <div class="preview-value" id="preview-fullName"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–ê–¥—Ä–µ—Å–∞:</div>
                    <div class="preview-value" id="preview-address"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">–¢–µ–ª–µ—Ñ–æ–Ω:</div>
                    <div class="preview-value" id="preview-phone"></div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">Email:</div>
                    <div class="preview-value" id="preview-email"></div>
                </div>
            </div>

            <div class="preview-section">
                <h3>–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É</h3>
                <div style="white-space: pre-wrap; line-height: 1.6; margin-bottom: 1rem;" id="preview-claimText"></div>
            </div>

            <div class="preview-section">
                <h3>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞/–∞–±–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏ —è–∫—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –æ—Ç—Ä–∏–º–∞—Ç–∏</h3>
                <div style="white-space: pre-wrap; line-height: 1.6;" id="preview-documentsRequested"></div>
            </div>
        </div>

        <div class="step-content" data-step="5">
            <div class="pdf-preview-container" id="pdfPreview">
                <div class="success-badge">
                    <span>‚úì</span> –î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø—ñ—à–Ω–æ —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–æ
                </div>

                <div class="pdf-header">
                    <div class="pdf-header-left">
                        <div class="pdf-icon">üìÑ</div>
                        <div class="pdf-title-section">
                            <h3>–ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π –∑–∞–ø–∏—Ç</h3>
                            <div class="pdf-subtitle">–ì–æ—Ç–æ–≤–æ –¥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É</div>
                        </div>
                    </div>
                </div>

                <div class="pdf-viewer-wrapper">
                    <iframe class="pdf-frame" id="pdfFrame"></iframe>
                </div>

                <div class="agreement-section">
                    <div class="agreement-box" id="agreementBox">
                        <label class="agreement-checkbox" id="agreementLabel">
                            <input type="checkbox" id="agreementCheckbox">
                            <span>–Ø –æ–∑–Ω–∞–π–æ–º–∏–≤—Å—è —Ç–∞ –∑–≥–æ–¥–µ–Ω –∑ <a href="/contract" target="_blank">—É–º–æ–≤–∞–º–∏ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä—É –Ω–∞ –Ω–∞–¥–∞–Ω–Ω—è –ø—Ä–∞–≤–Ω–∏—á–æ—ó –¥–æ–ø–æ–º–æ–≥–∏</a></span>
                        </label>
                        <div class="error-message" id="agreementError">
                            ‚ö†Ô∏è –î–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –æ–ø–ª–∞—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø—Ä–∏–π–Ω—è—Ç–∏ —É–º–æ–≤–∏ –¥–æ–≥–æ–≤–æ—Ä—É
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="button-group">
            <button class="submit-button" id="prevBtn" style="display: none; background: var(--light-gray); color: var(--navy);">–ü–û–í–ï–†–ù–£–¢–ò–°–¨</button>
            <button class="submit-button" id="nextBtn">–ù–ê–°–¢–£–ü–ù–ò–ô –ö–†–û–ö</button>
            <button class="submit-button" id="submitBtn" style="display: none; background: var(--gold); color: var(--navy);">–°–§–û–†–ú–£–í–ê–¢–ò –ó–ê–ü–ò–¢</button>
        </div>
    </div>

    <footer>
    <div class="footer-content">
        <div class="footer-logo">–ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π<span>–ó–∞–ø–∏—Ç</span></div>
        <p style="margin: 1rem 0;">–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —é—Ä–∏–¥–∏—á–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –æ–Ω–ª–∞–π–Ω</p>
        <div class="footer-text">
            <p>¬© 2026 –ê–¥–≤–æ–∫–∞—Ç—Å—å–∫–∏–π–ó–∞–ø–∏—Ç. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
            <p style="margin-top: 0.5rem;">
                –º. –û–¥–µ—Å–∞ |
                <a href="tel:+380972246754" style="color: inherit; text-decoration: none;">+380 (97) 224-67-54</a> |
                <a href="mailto:m.rudyk.advokat@gmail.com" style="color: inherit; text-decoration: none;">m.rudyk.advokat@gmail.com</a> |
                <a href="https://t.me/nasaraya13" target="_blank" style="color: inherit; text-decoration: none;">üì± Telegram</a>
            </p>
        </div>
    </div>
</footer>

<script>
let currentStep = 1;
const totalSteps = 5;
const formData = {};
let currentPdfUrl = '';
let orderId = null;

const regexPatterns = {
    phone: /^\+380\d{9}$/,
    email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
    edrpou: /^\d{8}$/,
    taxNumber: /^\d{10}$/
};

function showError(input, message) {
    let errorEl = input.parentNode.querySelector('.error-message');
    if (!errorEl) {
        errorEl = document.createElement('div');
        errorEl.className = 'error-message';
        input.parentNode.appendChild(errorEl);
    }
    errorEl.textContent = message;
    errorEl.classList.add('show');
    input.style.borderColor = '#ef4444';
}

function clearError(input) {
    const errorEl = input.parentNode.querySelector('.error-message');
    if (errorEl) {
        errorEl.classList.remove('show');
        errorEl.textContent = '';
    }
    input.style.borderColor = '';
}

function validateField(input) {
    clearError(input);
    const val = input.value.trim();
    let valid = true;

    if (input.hasAttribute('required') && !val) {
        showError(input, '–¶–µ –ø–æ–ª–µ –æ–±–æ–≤\'—è–∑–∫–æ–≤–µ');
        valid = false;
    } else if (val) {
        switch(input.id) {
            case 'organizationEDRPOU':
                if (!regexPatterns.edrpou.test(val)) {
                    showError(input, '–ö–æ–¥ –Ñ–î–†–ü–û–£ –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ 8 —Ü–∏—Ñ—Ä');
                    valid = false;
                }
                break;
            case 'organizationContact':
                const isPhone = regexPatterns.phone.test(val);
                const isEmail = regexPatterns.email.test(val);
                if (!isPhone && !isEmail) {
                    showError(input, '–í–≤–µ–¥—ñ—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω —É —Ñ–æ—Ä–º–∞—Ç—ñ +380XXXXXXXXX –∞–±–æ –∫–æ—Ä–µ–∫—Ç–Ω—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É');
                    valid = false;
                }
                break;
            case 'phone':
                if (!regexPatterns.phone.test(val)) {
                    showError(input, '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –º–∞—î –±—É—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ +380XXXXXXXXX');
                    valid = false;
                }
                break;
            case 'email':
                if (!regexPatterns.email.test(val)) {
                    showError(input, '–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É');
                    valid = false;
                }
                break;
            case 'taxNumber':
                if (!regexPatterns.taxNumber.test(val)) {
                    showError(input, '–†–ù–û–ö–ü–ü (–Ü–ü–ù) –º–∞—î —Å–∫–ª–∞–¥–∞—Ç–∏—Å—è –∑ 10 —Ü–∏—Ñ—Ä');
                    valid = false;
                }
                break;
            default:
                break;
        }
    }

    return valid;
}

function validateStep() {
    const inputs = document.querySelectorAll(`.step-content[data-step="${currentStep}"] input, .step-content[data-step="${currentStep}"] select, .step-content[data-step="${currentStep}"] textarea`);
    let isValid = true;
    inputs.forEach(input => {
        if (!validateField(input)) isValid = false;
    });
    return isValid;
}

document.addEventListener('input', (e) => {
    const input = e.target;
    if (!input) return;
    validateField(input);
});


function startLiqPayPayment(orderId) {
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = '/liqpay/pay';
    const input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'order_id';
    input.value = orderId;
    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();
}

function updateProgress() {
    const progressLine = document.getElementById('progressLine');
    const percentage = ((currentStep - 1) / (totalSteps - 1)) * 100;
    progressLine.style.width = percentage + '%';

    document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
        const stepNum = index + 1;
        indicator.classList.remove('active', 'completed');
        if (stepNum < currentStep) indicator.classList.add('completed');
        else if (stepNum === currentStep) indicator.classList.add('active');
    });

    document.querySelectorAll('.step-content').forEach(content => content.classList.remove('active'));
    document.querySelector(`.step-content[data-step="${currentStep}"]`).classList.add('active');

    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');

    prevBtn.style.display = currentStep === 1 ? 'none' : 'block';

    if (currentStep === 4) {
        nextBtn.style.display = 'none';
        submitBtn.style.display = 'block';
        submitBtn.textContent = '–°–§–û–†–ú–£–í–ê–¢–ò –ó–ê–ü–ò–¢';
        submitBtn.style.background = 'var(--gold)';
        submitBtn.style.color = 'var(--navy)';
        updatePreview();
    } else if (currentStep === 5) {
        nextBtn.style.display = 'none';
        submitBtn.style.display = 'block';
        submitBtn.textContent = '–û–ü–õ–ê–¢–ò–¢–ò';
        submitBtn.style.background = 'var(--light-gray)';
        submitBtn.style.color = 'var(--gray)';
        submitBtn.disabled = true;
    } else {
        nextBtn.style.display = 'block';
        submitBtn.style.display = 'none';
    }
}

function saveStepData() {
    const inputs = document.querySelectorAll(`.step-content[data-step="${currentStep}"] input, .step-content[data-step="${currentStep}"] select, .step-content[data-step="${currentStep}"] textarea`);
    inputs.forEach(input => {
        if (input.id) formData[input.id] = input.value;
        if (input.name === 'applicantType' && input.checked) formData.applicantType = input.value;
    });
}

function updatePreview() {
    document.getElementById('preview-organizationName').textContent = formData.organizationName || '-';
    document.getElementById('preview-organizationAddress').textContent = formData.organizationAddress || '-';
    document.getElementById('preview-organizationEDRPOU').textContent = formData.organizationEDRPOU || '-';
    document.getElementById('preview-organizationContact').textContent = formData.organizationContact || '-';

    const applicantType = formData.applicantType === 'physical' ? '–§—ñ–∑–∏—á–Ω–∞ –æ—Å–æ–±–∞' : '–Æ—Ä–∏–¥–∏—á–Ω–∞ –æ—Å–æ–±–∞';
    document.getElementById('preview-applicantType').textContent = applicantType;
    document.getElementById('preview-taxNumber').textContent = formData.taxNumber || '-';
    document.getElementById('preview-fullName').textContent = formData.fullName || '-';
    document.getElementById('preview-address').textContent = formData.address || '-';
    document.getElementById('preview-phone').textContent = formData.phone || '-';
    document.getElementById('preview-email').textContent = formData.email || '-';

    document.getElementById('preview-claimText').textContent = formData.claimText || '-';
    document.getElementById('preview-documentsRequested').textContent = formData.documentsRequested || '-';
}

document.getElementById('nextBtn').addEventListener('click', () => {
    if (validateStep()) {
        saveStepData();
        if (currentStep < totalSteps) {
            currentStep++;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
});

document.getElementById('prevBtn').addEventListener('click', () => {
    saveStepData();
    if (currentStep > 1) {
        currentStep--;
        updateProgress();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
});

document.getElementById('submitBtn').addEventListener('click', async (e) => {
    const submitBtn = document.getElementById('submitBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');

    if (currentStep === 5) {
        const agreementCheckbox = document.getElementById('agreementCheckbox');
        const agreementBox = document.getElementById('agreementBox');
        const agreementLabel = document.getElementById('agreementLabel');
        const agreementError = document.getElementById('agreementError');

        if (!agreementCheckbox || !agreementCheckbox.checked) {
            e.preventDefault();
            e.stopPropagation();
            agreementBox.classList.add('error');
            agreementLabel.classList.add('error');
            agreementError.classList.add('show');
            agreementBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
            setTimeout(() => {
                agreementBox.classList.remove('error');
                agreementLabel.classList.remove('error');
                agreementError.classList.remove('show');
            }, 3000);
            return false;
        }

        if (orderId) startLiqPayPayment(orderId);
        else alert('Order ID –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø–æ—á–∞—Ç–∫—É —Å—Ñ–æ—Ä–º—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç.');
        return;
    }

    submitBtn.disabled = true;
    loadingOverlay.classList.add('active');

    try {
        const response = await fetch('/court-form/submit', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (!result.success) throw new Error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞');

        currentPdfUrl = result.pdf_url;
        orderId = result.order_id;
        loadingOverlay.classList.remove('active');
        currentStep = 5;
        updateProgress();
        document.getElementById('pdfFrame').src = result.pdf_url;
        window.scrollTo({ top: 0, behavior: 'smooth' });
        submitBtn.disabled = false;

    } catch (error) {
        loadingOverlay.classList.remove('active');
        alert('‚ùå ' + error.message);
        submitBtn.disabled = false;
    }
});

document.addEventListener('change', (e) => {
    if (e.target.id === 'agreementCheckbox') {
        const submitBtn = document.getElementById('submitBtn');
        const agreementBox = document.getElementById('agreementBox');
        const agreementLabel = document.getElementById('agreementLabel');
        const agreementError = document.getElementById('agreementError');

        if (e.target.checked) {
            submitBtn.disabled = false;
            submitBtn.style.background = 'var(--gold)';
            submitBtn.style.color = 'var(--navy)';
            submitBtn.style.cursor = 'pointer';
            agreementBox.classList.remove('error');
            agreementLabel.classList.remove('error');
            agreementError.classList.remove('show');
        } else {
            submitBtn.disabled = true;
            submitBtn.style.background = 'var(--light-gray)';
            submitBtn.style.color = 'var(--gray)';
            submitBtn.style.cursor = 'not-allowed';
        }
    }
});

// Burger menu functionality
const burgerMenu = document.querySelector('.burger-menu');
const navLinks = document.querySelector('.nav-links');
const menuOverlay = document.querySelector('.menu-overlay');
const body = document.body;

function toggleMenu() {
    burgerMenu.classList.toggle('active');
    navLinks.classList.toggle('active');
    menuOverlay.classList.toggle('active');
    body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
}

burgerMenu.addEventListener('click', toggleMenu);
menuOverlay.addEventListener('click', toggleMenu);

// Close menu when clicking on a link
const navItems = navLinks.querySelectorAll('a');
navItems.forEach(item => {
    item.addEventListener('click', () => {
        if (navLinks.classList.contains('active')) {
            toggleMenu();
        }
    });
});

// Close menu on window resize
window.addEventListener('resize', () => {
    if (window.innerWidth > 968 && navLinks.classList.contains('active')) {
        toggleMenu();
    }
});

</script>
</body>
</html>